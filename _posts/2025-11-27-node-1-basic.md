---
# ====== 기본 Front Matter ======
title: "Node.js 기본 정리"
description: "Node.js 개념, 패키지, 모듈 시스템(CJS/ESM) 정리"
date: 2025-11-27 14:00:00 +0900
categories: [node]   # 최대 2개 권장
tags: [node, CJS, ESM]   # 소문자 권장
pin: false                 # 홈 상단 고정
toc: true                  # 우측 TOC 표시
comments: false             # 댓글
render_with_liquid: true  # 코드블록 안의 Liquid 무력화(필요 시 true로)
math: false                 # 수식
mermaid: true              #  다이어그램
lang: "ko"
---

## node.js
- React.js, Next.js, Vue.js, Svelte 등 프레임워크의 기반이 되는 실행 환경
- 웹 브라우저 밖에서도 자바스크립트를 실행할 수 있도록 만든 JavaScript 런타임
- Chrome V8 엔진 기반
- 서버 개발, CLI 툴 제작, 배치 스크립트 등 다양한 영역에서 활용됨

## 패키지(Package)
- Node.js에서 사용하는 프로그램 단위
- 프로젝트를 초기화하면 'package.json' 이 생성됨

### 패키지 초기화

```bash
npm init
```
### 특정 파일 실행

```bash
node src/index.js
```

### package.json 스크립트 추가 예시
- CJS라 "type": "commonjs"
- "scripts"에 "start": "node src/index.js" 추가하여 매크로 같이 사용

```json
{
  "name": "section02",
  "version": "1.0.0",
  "description": "",
  "license": "ISC",
  "author": "",
  "type": "commonjs",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node src/index.js"
  },
  "dependencies": {
    "randomcolor": "^0.6.2"
  }
}
```

### 스크립트 실행

```bash
npm run start
```

## 모듈 시스템(Module System)
- 기능별로 파일을 나누고 재사용할 수 있게 하는 시스템
- 예: user.js(회원), cart.js(장바구니), payment.js(결제)

Node.js 모듈 시스템은 크게 두 가지가 존재한다.
1. CJS(CommonJS) → require / module.exports
2. ESM(ECMAScript Module) → import / export

### CJS(CommonJS 모듈 시스템)
- Node.js의 기본 모듈 시스템(기본적으로 CommonJS로 동작)

#### import(불러오기)

```js
// index.js

const moduleData = require("./math");
console.log(moduleData.add(1, 2)); // 3
console.log(moduleData.sub(1, 2)); // -1
```

#### 구조분해 할당

```js
// index.js

const {add, sub} = require("./math");
console.log(add(1, 2)); // 3
console.log(sub(1, 2)); // -1
```

#### export(내보내기)

```js
// math.js

function add(a, b) {
  return a + b;
}

function sub(a, b) {
  return a - b;
}

module.exports = {
  add: add, // value 이름 값과 key 이름 값이 똑같을 경우 add 라고만 작성해도 됨
  sub: sub, // sub
};
```

### ESM(ES 모듈 시스템)
- 브라우저 표준 모듈 방식
- Node.js에서 ESM을 사용하려면 package.json 에 아래 항목 필요

```json
"type": "module"
```

```json
{
  "name": "section02",
  "version": "1.0.0",
  "description": "",
  "license": "ISC",
  "author": "",
  "type": "module",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node src/index.js"
  },
  "dependencies": {
    "randomcolor": "^0.6.2"
  }
}
```
#### import/export 기본 사용

```js
// index.js

import { add, sub } from "./math.js";

console.log(add(1, 2)); // 3
console.log(sub(1, 2)); // -1
```

```js
// math.js

function add(a, b) {
  return a + b;
}

function sub(a, b) {
  return a - b;
}

export { add, sub }; // export로 내보내기
```

#### export 키워드를 함수 앞에 붙이는 방식

```js
// math.js

export function add(a, b) {
  return a + b;
}

export function sub(a, b) {
  return a - b;
}

```
#### default export (대표값 내보내기)

```js
// math.js

export function add(a, b) {
  return a + b;
}

export function sub(a, b) {
  return a - b;
}

export default function multiply(a, b) {
  return a * b;
}
```

``` js
// index.js

import multiply from "./math.js";
import { add, sub } from "./math.js";
// import multiply, { add, sub } from "./math.js"; 이런식으로 합치기도 가능

console.log(add(1, 2)); // 3
console.log(sub(1, 2)); // -1
console.log(multiply(2, 3)); // 6
```
